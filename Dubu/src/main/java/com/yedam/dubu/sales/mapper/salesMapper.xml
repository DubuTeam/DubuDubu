<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.dubu.sales.mapper.SalesMapper">

	<!-- 주문서 전체조회 -->
	<select id="searchOrdr" resultType="SalesVO">
		SELECT * FROM ORDER_SHEET
		WHERE 1=1
		<if test="start != null"><![CDATA[and ORDER_DT >= #{start}]]></if>
		<if test="end != null"><![CDATA[and ORDER_DT <= #{end}]]></if>
		ORDER BY ORDER_NO
	</select>

	<!-- 조건별 주문서 조회 -->
	<select id="findOrdr" resultType="SalesVO">
		SELECT * FROM ORDER_SHEET
		<!-- WHERE ORDER_DT BETWEEN #{start} AND #{end} -->
		WHERE 1=1
		<if test="vendNm != null and vendNm != ''">and VEND_NM = #{vendNm}</if>
		<if test="prdtNm != null and prdtNm != ''">and PRDT_NM = #{prdtNm}</if>
		<if test="start != null"><![CDATA[and ORDER_DT >= #{start}]]></if>
		<if test="end != null"><![CDATA[and ORDER_DT <= #{end}]]></if>
		ORDER BY ORDER_NO
	</select>
	
	<!-- 거래처 목록 조회 모달창 -->
	<select id="comSearch" resultType="SalesVO">
		SELECT VEND_CD, VEND_NM, BIZNO, TELNO FROM VEND
	</select>
	
	<!-- 주문서 삭제 -->
	<delete id="deleteOrdr" parameterType="SalesVO">
		DELETE FROM ORDER_SHEET
		WHERE ORDER_NO = #{orderNo}
	</delete>


</mapper>